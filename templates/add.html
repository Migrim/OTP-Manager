{% extends 'bootstrap/base.html' %}

{% block title %} Add OTP Secret {% endblock %}

    {% block styles %}
    {{ super() }}
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/add.css') }}">
{% endblock %}

{% block navbar %}
<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <a class="navbar-brand" href="#">Secret Hinzuf√ºgen</a>
    <div class="navbar-nav mr-auto">
        <a class="navbar-brand" href="{{ url_for('home') }}">Home</a>
    </div>
    <div class="navbar-nav mr-auto">
        <a class="navbar-brand" href="{{ url_for('admin.admin_settings') }}">Settings</a>
    </div>
    <div id="logoutContainer">
        <div id="logoutBtn">
            <a class="navbar-brand" href="{{ url_for('logout') }}">Logout</a>
        </div>
    </div>            
</nav>
{% endblock %}

{% block content %}
<div class="center-content">
    <div class="form-container">
        <h1 class="form-title">Add OTP Secret</h1>
        <form method="POST">
            {{ form.hidden_tag() }}
            <div class="form-group">
                {{ form.name.label }} {{ form.name(class="form-control") }}
                {% for error in form.name.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
            <div class="form-group">
                {{ form.secret.label }} {{ form.secret(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.otp_type.label(class="form-check-label") }}
                {{ form.otp_type(class="form-control") }}
            </div>
            <div class="form-group">
                {{ form.company.label }}
                <select class="form-control" name="{{ form.company.name }}">
                    {% for value, label in form.company.choices %}
                        <option value="{{ value }}">{{ label }}</option>
                    {% endfor %}
                </select>
            </div>
            <div class="form-group">
                {{ form.refresh_time.label }}
                {{ form.refresh_time(class="form-control", value="30", readonly="readonly") }}
                {% for error in form.refresh_time.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>
            {{ form.submit(class="btn btn-primary btn-block form-submit") }}
        </form>
    </div>
</div>

<div aria-live="polite" aria-atomic="true" class="d-flex justify-content-center align-items-center" style="position: fixed; top: 1em; right: 1em; z-index: 1050;">
    <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" style="display: none;">
        <div class="toast-header">
            <strong class="mr-auto">Form Validation Error</strong>
            <small>just now</small>
            <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </div>
        <div class="toast-body">
            There was an error in your submission. Please check the form fields for details.
        </div>
    </div>
</div>
{% endblock %} 

{% block scripts %}
{{ super() }}
<script>
    $(document).ready(function() {
        if ($('.text-danger').length > 0) {
            $('.toast').toast({ delay: 5000 });
            $('.toast').toast('show');
        }
    });
</script>
{% endblock %}
